(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(5446)}])},8980:function(e,r,t){"use strict";t.d(r,{Z:function(){return Layout}});var n=t(5893),a=t(9008),s=t.n(a),l=t(1664),o=t.n(l);function Layout(e){let{children:r}=e;return(0,n.jsxs)("div",{children:[(0,n.jsxs)(s(),{children:[(0,n.jsx)("title",{children:"Warriors Game AI Commentary"}),(0,n.jsx)("meta",{name:"description",content:"AI-powered commentary for Warriors games"}),(0,n.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,n.jsx)("nav",{className:"bg-blue-600 text-white p-4",children:(0,n.jsxs)("div",{className:"container mx-auto flex justify-between items-center",children:[(0,n.jsx)(o(),{href:"/",className:"text-2xl font-bold",children:"Warriors AI Commentary"}),(0,n.jsxs)("ul",{className:"flex space-x-4",children:[(0,n.jsx)("li",{children:(0,n.jsx)(o(),{href:"/",className:"hover:text-blue-200",children:"Home"})}),(0,n.jsx)("li",{children:(0,n.jsx)(o(),{href:"/analytics",className:"hover:text-blue-200",children:"Analytics"})})]})]})}),(0,n.jsx)("main",{children:r})]})}},5446:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return Home}});var n=t(5893),a=t(8980),s=t(7294);function CommentarySidebar(e){let{commentary:r,onSendMessage:t}=e,a=(0,s.useRef)(null),[l,o]=(0,s.useState)("");return(0,s.useEffect)(()=>{a.current&&(a.current.scrollTop=a.current.scrollHeight)},[r]),(0,n.jsxs)("div",{className:"bg-gray-100 h-full flex flex-col commentary",children:[(0,n.jsxs)("div",{className:"flex-grow overflow-y-auto p-4",ref:a,children:[(0,n.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Live Chat"}),(0,n.jsx)("div",{className:"space-y-4",children:r.map((e,r)=>(0,n.jsxs)("div",{className:"p-3 rounded shadow ".concat("user"===e.type?"bg-blue-100 text-right":"bg-white"),children:[(0,n.jsx)("p",{className:"text-sm text-gray-600",children:e.timestamp}),(0,n.jsx)("p",{className:"mt-1",children:e.text})]},r))})]}),(0,n.jsx)("form",{onSubmit:e=>{e.preventDefault(),l.trim()&&(t(l),o(""))},className:"p-4 bg-white border-t",children:(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)("input",{type:"text",value:l,onChange:e=>o(e.target.value),placeholder:"Type your message...",className:"flex-grow px-3 py-2 border rounded-l-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,n.jsx)("button",{type:"submit",className:"bg-blue-500 text-white px-4 py-2 rounded-r-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Send"})]})})]})}function VideoPlayer(e){let{videoSrc:r}=e,t=(0,s.useRef)(null),[a,l]=(0,s.useState)(null),[o,i]=(0,s.useState)([]);return(0,s.useEffect)(()=>{let e;let r=t.current,n=0,captureFrame=t=>{if(t-n>=2e3&&r.readyState>=r.HAVE_CURRENT_DATA){let e=document.createElement("canvas");e.width=r.videoWidth,e.height=r.videoHeight,e.getContext("2d").drawImage(r,0,0,e.width,e.height),console.log("Capturing frame:",e.width,"x",e.height);let a=e.toDataURL("image/jpeg");fetch("/api/commentary",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({imageData:a,width:e.width,height:e.height})}).then(e=>e.json()).then(e=>{console.log("Commentary generated:",e),i(r=>[...r,{...e,type:"ai"}])}).catch(e=>{console.error("Error generating commentary:",e),l("Error generating commentary. Please check the console for details.")}),n=t}e=requestAnimationFrame(captureFrame)},handlePlay=()=>{console.log("Video playback started"),e=requestAnimationFrame(captureFrame)},handlePause=()=>{console.log("Video playback paused"),cancelAnimationFrame(e)},handleError=e=>{console.error("Video error:",e),l("Error loading video. Please check the video source.")};return r.addEventListener("play",handlePlay),r.addEventListener("pause",handlePause),r.addEventListener("error",handleError),()=>{r.removeEventListener("play",handlePlay),r.removeEventListener("pause",handlePause),r.removeEventListener("error",handleError),cancelAnimationFrame(e)}},[]),(0,n.jsxs)("div",{className:"flex flex-row h-screen videoplayer",children:[(0,n.jsxs)("div",{className:"w-2/3 p-4",children:[(0,n.jsx)("video",{ref:t,src:r,controls:!0,crossOrigin:"anonymous",className:"w-full h-auto max-h-full"}),a&&(0,n.jsx)("p",{className:"text-red-500 mt-2",children:a})]}),(0,n.jsx)("div",{className:"w-1/3 p-4 overflow-hidden",children:(0,n.jsx)(CommentarySidebar,{commentary:o,onSendMessage:e=>{let r={timestamp:new Date().toISOString(),text:e,type:"user"};i(e=>[...e,r])}})})]})}function Home(){return(0,n.jsx)(a.Z,{children:(0,n.jsx)(VideoPlayer,{videoSrc:"/sample-video.mp4"})})}}},function(e){e.O(0,[996,774,888,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);