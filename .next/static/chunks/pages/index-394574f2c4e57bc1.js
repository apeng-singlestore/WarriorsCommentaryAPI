(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(5446)}])},8980:function(e,t,r){"use strict";r.d(t,{Z:function(){return Layout}});var n=r(5893),s=r(9008),a=r.n(s),l=r(1664),i=r.n(l);function Layout(e){let{children:t}=e;return(0,n.jsxs)("div",{children:[(0,n.jsxs)(a(),{children:[(0,n.jsx)("title",{children:"Warriors Game AI Commentary"}),(0,n.jsx)("meta",{name:"description",content:"AI-powered commentary for Warriors games"}),(0,n.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,n.jsx)("nav",{className:"bg-blue-600 text-white p-4",children:(0,n.jsxs)("div",{className:"container mx-auto flex justify-between items-center",children:[(0,n.jsx)(i(),{href:"/",className:"text-2xl font-bold",children:"Warriors AI Commentary"}),(0,n.jsxs)("ul",{className:"flex space-x-4",children:[(0,n.jsx)("li",{children:(0,n.jsx)(i(),{href:"/",className:"hover:text-blue-200",children:"Home"})}),(0,n.jsx)("li",{children:(0,n.jsx)(i(),{href:"/analytics",className:"hover:text-blue-200",children:"Analytics"})})]})]})}),(0,n.jsx)("main",{children:t})]})}},5446:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return Home}});var n=r(5893),s=r(8980),a=r(7294);function CommentarySidebar(e){let{commentary:t,onSendMessage:r,showAIMessages:s,onToggleAIMessages:l}=e,i=(0,a.useRef)(null),[o,c]=(0,a.useState)("");return(0,a.useEffect)(()=>{i.current&&(i.current.scrollTop=i.current.scrollHeight)},[t]),(0,n.jsxs)("div",{className:"bg-gray-100 h-full flex flex-col commentary",children:[(0,n.jsxs)("div",{className:"p-4 bg-white border-b",children:[(0,n.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"Live Chat"}),(0,n.jsx)("button",{onClick:l,className:"bg-blue-500 text-white px-4 py-2 rounded w-full",children:s?"Hide AI Messages":"Show AI Messages"})]}),(0,n.jsx)("div",{className:"flex-grow overflow-y-auto p-4",ref:i,children:(0,n.jsx)("div",{className:"space-y-4",children:t.map((e,t)=>(0,n.jsxs)("div",{className:"p-3 rounded shadow ".concat("user"===e.type?"bg-blue-100 text-right":"bg-white"),children:[(0,n.jsx)("p",{className:"text-sm text-gray-600",children:new Date(e.timestamp).toLocaleTimeString()}),(0,n.jsx)("p",{className:"mt-1",children:e.text})]},t))})}),(0,n.jsx)("form",{onSubmit:e=>{e.preventDefault(),o.trim()&&(r(o),c(""))},className:"p-4 bg-white border-t",children:(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)("input",{type:"text",value:o,onChange:e=>c(e.target.value),placeholder:"Type your message...",className:"flex-grow px-3 py-2 border rounded-l-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,n.jsx)("button",{type:"submit",className:"bg-blue-500 text-white px-4 py-2 rounded-r-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Send"})]})})]})}function VideoPlayer(e){let{videoSrc:t}=e,r=(0,a.useRef)(null),[s,l]=(0,a.useState)(null),[i,o]=(0,a.useState)([]),[c,d]=(0,a.useState)(!0),[u,h]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{let e;let t=r.current,n=0,captureFrame=r=>{if(r-n>=2e3&&t.readyState>=t.HAVE_CURRENT_DATA){h(!0);let e=document.createElement("canvas");e.width=t.videoWidth,e.height=t.videoHeight,e.getContext("2d").drawImage(t,0,0,e.width,e.height),console.log("Capturing frame:",e.width,"x",e.height);let s=e.toDataURL("image/jpeg");fetch("/api/commentary",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({imageData:s,width:e.width,height:e.height})}).then(e=>e.json()).then(e=>{console.log("Commentary generated:",e),o(t=>[...t,{...e,type:"ai"}]),h(!1)}).catch(e=>{console.error("Error generating commentary:",e),l("Error generating commentary. Please check the console for details."),h(!1)}),n=r}e=requestAnimationFrame(captureFrame)},handlePlay=()=>{console.log("Video playback started"),e=requestAnimationFrame(captureFrame)},handlePause=()=>{console.log("Video playback paused"),cancelAnimationFrame(e),h(!1)},handleError=e=>{console.error("Video error:",e),l("Error loading video. Please check the video source.")};return t.addEventListener("play",handlePlay),t.addEventListener("pause",handlePause),t.addEventListener("error",handleError),()=>{t.removeEventListener("play",handlePlay),t.removeEventListener("pause",handlePause),t.removeEventListener("error",handleError),cancelAnimationFrame(e)}},[]),(0,n.jsxs)("div",{className:"flex flex-row h-screen videoplayer",children:[(0,n.jsxs)("div",{className:"w-2/3 p-4 relative",children:[(0,n.jsx)("video",{ref:r,src:t,controls:!0,crossOrigin:"anonymous",className:"w-full h-auto max-h-full"}),s&&(0,n.jsx)("p",{className:"text-red-500 mt-2",children:s}),u&&(0,n.jsx)("div",{className:"absolute top-4 right-4 bg-blue-500 text-white px-2 py-1 rounded",children:"AI is watching"})]}),(0,n.jsx)("div",{className:"w-1/3 p-4 overflow-hidden",children:(0,n.jsx)(CommentarySidebar,{commentary:c?i:i.filter(e=>"ai"!==e.type),onSendMessage:e=>{let t={timestamp:new Date().toISOString(),text:e,type:"user"};o(e=>[...e,t])},showAIMessages:c,onToggleAIMessages:()=>{d(!c)}})})]})}function Home(){return(0,n.jsx)(s.Z,{children:(0,n.jsx)(VideoPlayer,{videoSrc:"/sample-video.mp4"})})}}},function(e){e.O(0,[996,774,888,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);