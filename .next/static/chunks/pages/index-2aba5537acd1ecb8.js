(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(5005)}])},5005:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return Home}});var a=r(5893),n=r(9008),s=r.n(n);function Layout(e){let{children:t}=e;return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsxs)(s(),{children:[(0,a.jsx)("title",{children:"Warriors Game AI Commentary"}),(0,a.jsx)("meta",{name:"description",content:"AI-powered commentary for Warriors games"}),(0,a.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,a.jsx)("header",{className:"bg-white shadow-md",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsx)("div",{className:"flex items-center justify-between h-16",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("img",{src:"/logo.png",alt:"Logo",className:"h-8 w-8"}),(0,a.jsx)("h1",{className:"ml-3 text-xl font-semibold text-gray-800",children:"Warriors Game AI Commentary"})]})})})}),(0,a.jsx)("main",{children:t})]})}var l=r(7294);function CommentarySidebar(e){let{commentary:t,onSendMessage:r}=e,n=(0,l.useRef)(null),[s,o]=(0,l.useState)("");return(0,l.useEffect)(()=>{n.current&&(n.current.scrollTop=n.current.scrollHeight)},[t]),(0,a.jsxs)("div",{className:"flex flex-col h-full bg-white rounded-lg shadow-lg overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex-grow p-4 overflow-y-auto",ref:n,children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4 text-gray-800",children:"Live Chat"}),(0,a.jsx)("div",{className:"space-y-4",children:t.map((e,t)=>(0,a.jsx)("div",{className:"flex ".concat("user"===e.type?"justify-end":"justify-start"),children:(0,a.jsxs)("div",{className:"max-w-xs px-4 py-2 rounded-lg ".concat("user"===e.type?"bg-blue-500 text-white":"bg-gray-200 text-gray-800"),children:[(0,a.jsx)("p",{className:"text-sm",children:e.text}),(0,a.jsx)("p",{className:"mt-1 text-xs text-gray-500 text-right",children:new Date(e.timestamp).toLocaleTimeString()})]})},t))})]}),(0,a.jsx)("form",{onSubmit:e=>{e.preventDefault(),s.trim()&&(r(s),o(""))},className:"border-t p-4 bg-gray-50",children:(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("input",{type:"text",value:s,onChange:e=>o(e.target.value),placeholder:"Type your message...",className:"flex-grow px-4 py-2 border border-gray-300 rounded-l-full focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,a.jsx)("button",{type:"submit",className:"bg-blue-500 text-white px-6 py-2 rounded-r-full hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Send"})]})})]})}function VideoPlayer(e){let{videoSrc:t}=e,r=(0,l.useRef)(null),[n,s]=(0,l.useState)(null),[o,i]=(0,l.useState)([]);return(0,l.useEffect)(()=>{let e;let t=r.current,a=0,captureFrame=r=>{if(r-a>=5e3&&t.readyState>=t.HAVE_CURRENT_DATA){let e=document.createElement("canvas");e.width=t.videoWidth,e.height=t.videoHeight,e.getContext("2d").drawImage(t,0,0,e.width,e.height),console.log("Capturing frame:",e.width,"x",e.height);let n=e.toDataURL("image/jpeg");fetch("/api/commentary",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({imageData:n,width:e.width,height:e.height})}).then(e=>e.json()).then(e=>{console.log("Commentary generated:",e),i(t=>[...t,{...e,type:"ai"}])}).catch(e=>{console.error("Error generating commentary:",e),s("Error generating commentary. Please check the console for details.")}),a=r}e=requestAnimationFrame(captureFrame)},handlePlay=()=>{console.log("Video playback started"),e=requestAnimationFrame(captureFrame)},handlePause=()=>{console.log("Video playback paused"),cancelAnimationFrame(e)},handleError=e=>{console.error("Video error:",e),s("Error loading video. Please check the video source.")};return t.addEventListener("play",handlePlay),t.addEventListener("pause",handlePause),t.addEventListener("error",handleError),()=>{t.removeEventListener("play",handlePlay),t.removeEventListener("pause",handlePause),t.removeEventListener("error",handleError),cancelAnimationFrame(e)}},[]),(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row h-full",children:[(0,a.jsxs)("div",{className:"lg:w-2/3 w-full p-4",children:[(0,a.jsx)("div",{className:"bg-black rounded-lg overflow-hidden shadow-lg",children:(0,a.jsx)("video",{ref:r,src:t,controls:!0,crossOrigin:"anonymous",className:"w-full h-auto max-h-full"})}),n&&(0,a.jsx)("p",{className:"text-red-500 mt-2",children:n})]}),(0,a.jsx)("div",{className:"lg:w-1/3 w-full p-4",children:(0,a.jsx)(CommentarySidebar,{commentary:o,onSendMessage:e=>{let t={timestamp:new Date().toISOString(),text:e,type:"user"};i(e=>[...e,t])}})})]})}function Home(){return(0,a.jsx)(Layout,{children:(0,a.jsx)(VideoPlayer,{videoSrc:"/path-to-your-video.mp4"})})}},9008:function(e,t,r){e.exports=r(9201)}},function(e){e.O(0,[774,888,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);