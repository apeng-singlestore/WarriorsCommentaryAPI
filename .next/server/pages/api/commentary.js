"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/commentary";
exports.ids = ["pages/api/commentary"];
exports.modules = {

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "sharp":
/*!************************!*\
  !*** external "sharp" ***!
  \************************/
/***/ ((module) => {

module.exports = require("sharp");

/***/ }),

/***/ "@singlestore/ai":
/*!**********************************!*\
  !*** external "@singlestore/ai" ***!
  \**********************************/
/***/ ((module) => {

module.exports = import("@singlestore/ai");;

/***/ }),

/***/ "@singlestore/client":
/*!**************************************!*\
  !*** external "@singlestore/client" ***!
  \**************************************/
/***/ ((module) => {

module.exports = import("@singlestore/client");;

/***/ }),

/***/ "groq-sdk":
/*!***************************!*\
  !*** external "groq-sdk" ***!
  \***************************/
/***/ ((module) => {

module.exports = import("groq-sdk");;

/***/ }),

/***/ "openai":
/*!*************************!*\
  !*** external "openai" ***!
  \*************************/
/***/ ((module) => {

module.exports = import("openai");;

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fcommentary&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fcommentary.js&middlewareConfigBase64=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fcommentary&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fcommentary.js&middlewareConfigBase64=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_commentary_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/commentary.js */ \"(api)/./pages/api/commentary.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_api_commentary_js__WEBPACK_IMPORTED_MODULE_3__]);\n_pages_api_commentary_js__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_commentary_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_commentary_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/commentary\",\n        pathname: \"/api/commentary\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_commentary_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmNvbW1lbnRhcnkmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyUyRmFwaSUyRmNvbW1lbnRhcnkuanMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ0w7QUFDMUQ7QUFDc0Q7QUFDdEQ7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLHFEQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQyxxREFBUTtBQUNwQztBQUNPLHdCQUF3QixnSEFBbUI7QUFDbEQ7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQscUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93YXJyaW9yc2NvbW1lbnRhcnlhcGkvPzczZGUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3BhZ2VzL2FwaS9jb21tZW50YXJ5LmpzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsIFwiZGVmYXVsdFwiKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsIFwiY29uZmlnXCIpO1xuLy8gQ3JlYXRlIGFuZCBleHBvcnQgdGhlIHJvdXRlIG1vZHVsZSB0aGF0IHdpbGwgYmUgY29uc3VtZWQuXG5leHBvcnQgY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgUGFnZXNBUElSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuUEFHRVNfQVBJLFxuICAgICAgICBwYWdlOiBcIi9hcGkvY29tbWVudGFyeVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2NvbW1lbnRhcnlcIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiBcIlwiLFxuICAgICAgICBmaWxlbmFtZTogXCJcIlxuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fcommentary&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fcommentary.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./lib/commentaryGenerator.js":
/*!************************************!*\
  !*** ./lib/commentaryGenerator.js ***!
  \************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   generateCommentary: () => (/* binding */ generateCommentary)\n/* harmony export */ });\n/* harmony import */ var _groqClient__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./groqClient */ \"(api)/./lib/groqClient.js\");\n/* harmony import */ var _frameProcessor__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./frameProcessor */ \"(api)/./lib/frameProcessor.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_groqClient__WEBPACK_IMPORTED_MODULE_0__]);\n_groqClient__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\nasync function generateCommentary(imageData, width, height) {\n    try {\n        console.log(\"Generating commentary for frame:\", width, \"x\", height);\n        console.log(\"Image data type:\", typeof imageData);\n        console.log(\"Image data length:\", imageData ? imageData.length : \"N/A\");\n        if (!imageData) {\n            throw new Error(\"No image data provided\");\n        }\n        const { encodedImage } = await (0,_frameProcessor__WEBPACK_IMPORTED_MODULE_1__.processFrame)(imageData, width, height);\n        console.log(\"Encoded image length:\", encodedImage.length);\n        try {\n            const { commentary, embedding } = await (0,_groqClient__WEBPACK_IMPORTED_MODULE_0__.generateCommentaryWithGroq)(encodedImage);\n            console.log(\"Generated commentary:\", commentary);\n            console.log(\"Generated embedding:\", embedding);\n            return {\n                timestamp: new Date().toISOString(),\n                text: commentary,\n                embedding: embedding\n            };\n        } catch (groqError) {\n            console.error(\"Error in generateCommentaryWithGroq:\", groqError);\n            return {\n                timestamp: new Date().toISOString(),\n                text: \"Error generating commentary with Groq API.\",\n                embedding: null\n            };\n        }\n    } catch (error) {\n        console.error(\"Error in generateCommentary:\", error);\n        return {\n            timestamp: new Date().toISOString(),\n            text: \"Error processing frame or generating commentary.\",\n            embedding: null\n        };\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvY29tbWVudGFyeUdlbmVyYXRvci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBMEQ7QUFDVjtBQUV6QyxlQUFlRSxtQkFBbUJDLFNBQVMsRUFBRUMsS0FBSyxFQUFFQyxNQUFNO0lBQy9ELElBQUk7UUFDRkMsUUFBUUMsR0FBRyxDQUFDLG9DQUFvQ0gsT0FBTyxLQUFLQztRQUM1REMsUUFBUUMsR0FBRyxDQUFDLG9CQUFvQixPQUFPSjtRQUN2Q0csUUFBUUMsR0FBRyxDQUFDLHNCQUFzQkosWUFBWUEsVUFBVUssTUFBTSxHQUFHO1FBRWpFLElBQUksQ0FBQ0wsV0FBVztZQUNkLE1BQU0sSUFBSU0sTUFBTTtRQUNsQjtRQUVBLE1BQU0sRUFBRUMsWUFBWSxFQUFFLEdBQUcsTUFBTVQsNkRBQVlBLENBQUNFLFdBQVdDLE9BQU9DO1FBQzlEQyxRQUFRQyxHQUFHLENBQUMseUJBQXlCRyxhQUFhRixNQUFNO1FBRXhELElBQUk7WUFDRixNQUFNLEVBQUVHLFVBQVUsRUFBRUMsU0FBUyxFQUFFLEdBQzdCLE1BQU1aLHVFQUEwQkEsQ0FBQ1U7WUFDbkNKLFFBQVFDLEdBQUcsQ0FBQyx5QkFBeUJJO1lBQ3JDTCxRQUFRQyxHQUFHLENBQUMsd0JBQXdCSztZQUNwQyxPQUFPO2dCQUNMQyxXQUFXLElBQUlDLE9BQU9DLFdBQVc7Z0JBQ2pDQyxNQUFNTDtnQkFDTkMsV0FBV0E7WUFDYjtRQUNGLEVBQUUsT0FBT0ssV0FBVztZQUNsQlgsUUFBUVksS0FBSyxDQUFDLHdDQUF3Q0Q7WUFDdEQsT0FBTztnQkFDTEosV0FBVyxJQUFJQyxPQUFPQyxXQUFXO2dCQUNqQ0MsTUFBTTtnQkFDTkosV0FBVztZQUNiO1FBQ0Y7SUFDRixFQUFFLE9BQU9NLE9BQU87UUFDZFosUUFBUVksS0FBSyxDQUFDLGdDQUFnQ0E7UUFDOUMsT0FBTztZQUNMTCxXQUFXLElBQUlDLE9BQU9DLFdBQVc7WUFDakNDLE1BQU07WUFDTkosV0FBVztRQUNiO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3dhcnJpb3JzY29tbWVudGFyeWFwaS8uL2xpYi9jb21tZW50YXJ5R2VuZXJhdG9yLmpzP2U4OGMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2VuZXJhdGVDb21tZW50YXJ5V2l0aEdyb3EgfSBmcm9tIFwiLi9ncm9xQ2xpZW50XCI7XG5pbXBvcnQgeyBwcm9jZXNzRnJhbWUgfSBmcm9tIFwiLi9mcmFtZVByb2Nlc3NvclwiO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGVDb21tZW50YXJ5KGltYWdlRGF0YSwgd2lkdGgsIGhlaWdodCkge1xuICB0cnkge1xuICAgIGNvbnNvbGUubG9nKFwiR2VuZXJhdGluZyBjb21tZW50YXJ5IGZvciBmcmFtZTpcIiwgd2lkdGgsIFwieFwiLCBoZWlnaHQpO1xuICAgIGNvbnNvbGUubG9nKFwiSW1hZ2UgZGF0YSB0eXBlOlwiLCB0eXBlb2YgaW1hZ2VEYXRhKTtcbiAgICBjb25zb2xlLmxvZyhcIkltYWdlIGRhdGEgbGVuZ3RoOlwiLCBpbWFnZURhdGEgPyBpbWFnZURhdGEubGVuZ3RoIDogXCJOL0FcIik7XG5cbiAgICBpZiAoIWltYWdlRGF0YSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gaW1hZ2UgZGF0YSBwcm92aWRlZFwiKTtcbiAgICB9XG5cbiAgICBjb25zdCB7IGVuY29kZWRJbWFnZSB9ID0gYXdhaXQgcHJvY2Vzc0ZyYW1lKGltYWdlRGF0YSwgd2lkdGgsIGhlaWdodCk7XG4gICAgY29uc29sZS5sb2coXCJFbmNvZGVkIGltYWdlIGxlbmd0aDpcIiwgZW5jb2RlZEltYWdlLmxlbmd0aCk7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBjb21tZW50YXJ5LCBlbWJlZGRpbmcgfSA9XG4gICAgICAgIGF3YWl0IGdlbmVyYXRlQ29tbWVudGFyeVdpdGhHcm9xKGVuY29kZWRJbWFnZSk7XG4gICAgICBjb25zb2xlLmxvZyhcIkdlbmVyYXRlZCBjb21tZW50YXJ5OlwiLCBjb21tZW50YXJ5KTtcbiAgICAgIGNvbnNvbGUubG9nKFwiR2VuZXJhdGVkIGVtYmVkZGluZzpcIiwgZW1iZWRkaW5nKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICB0ZXh0OiBjb21tZW50YXJ5LFxuICAgICAgICBlbWJlZGRpbmc6IGVtYmVkZGluZyxcbiAgICAgIH07XG4gICAgfSBjYXRjaCAoZ3JvcUVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgaW4gZ2VuZXJhdGVDb21tZW50YXJ5V2l0aEdyb3E6XCIsIGdyb3FFcnJvcik7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgdGV4dDogXCJFcnJvciBnZW5lcmF0aW5nIGNvbW1lbnRhcnkgd2l0aCBHcm9xIEFQSS5cIixcbiAgICAgICAgZW1iZWRkaW5nOiBudWxsLFxuICAgICAgfTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGluIGdlbmVyYXRlQ29tbWVudGFyeTpcIiwgZXJyb3IpO1xuICAgIHJldHVybiB7XG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgIHRleHQ6IFwiRXJyb3IgcHJvY2Vzc2luZyBmcmFtZSBvciBnZW5lcmF0aW5nIGNvbW1lbnRhcnkuXCIsXG4gICAgICBlbWJlZGRpbmc6IG51bGwsXG4gICAgfTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbImdlbmVyYXRlQ29tbWVudGFyeVdpdGhHcm9xIiwicHJvY2Vzc0ZyYW1lIiwiZ2VuZXJhdGVDb21tZW50YXJ5IiwiaW1hZ2VEYXRhIiwid2lkdGgiLCJoZWlnaHQiLCJjb25zb2xlIiwibG9nIiwibGVuZ3RoIiwiRXJyb3IiLCJlbmNvZGVkSW1hZ2UiLCJjb21tZW50YXJ5IiwiZW1iZWRkaW5nIiwidGltZXN0YW1wIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwidGV4dCIsImdyb3FFcnJvciIsImVycm9yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/commentaryGenerator.js\n");

/***/ }),

/***/ "(api)/./lib/config.js":
/*!***********************!*\
  !*** ./lib/config.js ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GROQ_API_KEY: () => (/* binding */ GROQ_API_KEY),\n/* harmony export */   OPENAI_API_KEY: () => (/* binding */ OPENAI_API_KEY)\n/* harmony export */ });\nconst GROQ_API_KEY = process.env.GROQ_API_KEY;\nconst OPENAI_API_KEY = process.env.OPENAI_API_KEY;\nconsole.log(\"GROQ_API_KEY in config:\", GROQ_API_KEY ? \"Set\" : \"Not set\");\nconsole.log(\"OPENAI_API_KEY in config:\", OPENAI_API_KEY ? \"Set\" : \"Not set\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvY29uZmlnLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQU8sTUFBTUEsZUFBZUMsUUFBUUMsR0FBRyxDQUFDRixZQUFZLENBQUM7QUFDOUMsTUFBTUcsaUJBQWlCRixRQUFRQyxHQUFHLENBQUNDLGNBQWMsQ0FBQztBQUV6REMsUUFBUUMsR0FBRyxDQUFDLDJCQUEyQkwsZUFBZSxRQUFRO0FBQzlESSxRQUFRQyxHQUFHLENBQUMsNkJBQTZCRixpQkFBaUIsUUFBUSIsInNvdXJjZXMiOlsid2VicGFjazovL3dhcnJpb3JzY29tbWVudGFyeWFwaS8uL2xpYi9jb25maWcuanM/MDZjNSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgR1JPUV9BUElfS0VZID0gcHJvY2Vzcy5lbnYuR1JPUV9BUElfS0VZO1xuZXhwb3J0IGNvbnN0IE9QRU5BSV9BUElfS0VZID0gcHJvY2Vzcy5lbnYuT1BFTkFJX0FQSV9LRVk7XG5cbmNvbnNvbGUubG9nKFwiR1JPUV9BUElfS0VZIGluIGNvbmZpZzpcIiwgR1JPUV9BUElfS0VZID8gXCJTZXRcIiA6IFwiTm90IHNldFwiKTtcbmNvbnNvbGUubG9nKFwiT1BFTkFJX0FQSV9LRVkgaW4gY29uZmlnOlwiLCBPUEVOQUlfQVBJX0tFWSA/IFwiU2V0XCIgOiBcIk5vdCBzZXRcIik7XG4iXSwibmFtZXMiOlsiR1JPUV9BUElfS0VZIiwicHJvY2VzcyIsImVudiIsIk9QRU5BSV9BUElfS0VZIiwiY29uc29sZSIsImxvZyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/config.js\n");

/***/ }),

/***/ "(api)/./lib/frameProcessor.js":
/*!*******************************!*\
  !*** ./lib/frameProcessor.js ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   processFrame: () => (/* binding */ processFrame)\n/* harmony export */ });\n/* harmony import */ var sharp__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! sharp */ \"sharp\");\n/* harmony import */ var sharp__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(sharp__WEBPACK_IMPORTED_MODULE_0__);\n\nasync function processFrame(imageData, width, height) {\n    try {\n        console.log(\"Processing frame:\", width, \"x\", height);\n        let buffer;\n        if (typeof imageData === \"string\") {\n            // If imageData is a base64 string, remove the prefix and convert to buffer\n            const base64Data = imageData.replace(/^data:image\\/\\w+;base64,/, \"\");\n            buffer = Buffer.from(base64Data, \"base64\");\n        } else if (Buffer.isBuffer(imageData)) {\n            // If imageData is already a Buffer, use it directly\n            buffer = imageData;\n        } else {\n            throw new Error(\"Invalid imageData format\");\n        }\n        // Compress the image using sharp\n        const compressedImage = await sharp__WEBPACK_IMPORTED_MODULE_0___default()(buffer).resize({\n            width: 640,\n            height: 360,\n            fit: \"inside\"\n        }).jpeg({\n            quality: 80\n        }).toBuffer();\n        const encodedImage = `data:image/jpeg;base64,${compressedImage.toString(\"base64\")}`;\n        console.log(\"Image compressed, new size:\", encodedImage.length);\n        // Generate a simple frame description\n        const frameDescription = `Frame size ${width}x${height}`;\n        console.log(\"Generated frame description:\", frameDescription);\n        return {\n            frameDescription,\n            encodedImage\n        };\n    } catch (error) {\n        console.error(\"Error in processFrame:\", error);\n        throw error;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvZnJhbWVQcm9jZXNzb3IuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQTBCO0FBRW5CLGVBQWVDLGFBQWFDLFNBQVMsRUFBRUMsS0FBSyxFQUFFQyxNQUFNO0lBQ3pELElBQUk7UUFDRkMsUUFBUUMsR0FBRyxDQUFDLHFCQUFxQkgsT0FBTyxLQUFLQztRQUU3QyxJQUFJRztRQUNKLElBQUksT0FBT0wsY0FBYyxVQUFVO1lBQ2pDLDJFQUEyRTtZQUMzRSxNQUFNTSxhQUFhTixVQUFVTyxPQUFPLENBQUMsNEJBQTRCO1lBQ2pFRixTQUFTRyxPQUFPQyxJQUFJLENBQUNILFlBQVk7UUFDbkMsT0FBTyxJQUFJRSxPQUFPRSxRQUFRLENBQUNWLFlBQVk7WUFDckMsb0RBQW9EO1lBQ3BESyxTQUFTTDtRQUNYLE9BQU87WUFDTCxNQUFNLElBQUlXLE1BQU07UUFDbEI7UUFFQSxpQ0FBaUM7UUFDakMsTUFBTUMsa0JBQWtCLE1BQU1kLDRDQUFLQSxDQUFDTyxRQUNqQ1EsTUFBTSxDQUFDO1lBQUVaLE9BQU87WUFBS0MsUUFBUTtZQUFLWSxLQUFLO1FBQVMsR0FDaERDLElBQUksQ0FBQztZQUFFQyxTQUFTO1FBQUcsR0FDbkJDLFFBQVE7UUFFWCxNQUFNQyxlQUFlLENBQUMsdUJBQXVCLEVBQUVOLGdCQUFnQk8sUUFBUSxDQUFDLFVBQVUsQ0FBQztRQUNuRmhCLFFBQVFDLEdBQUcsQ0FBQywrQkFBK0JjLGFBQWFFLE1BQU07UUFFOUQsc0NBQXNDO1FBQ3RDLE1BQU1DLG1CQUFtQixDQUFDLFdBQVcsRUFBRXBCLE1BQU0sQ0FBQyxFQUFFQyxPQUFPLENBQUM7UUFDeERDLFFBQVFDLEdBQUcsQ0FBQyxnQ0FBZ0NpQjtRQUU1QyxPQUFPO1lBQUVBO1lBQWtCSDtRQUFhO0lBQzFDLEVBQUUsT0FBT0ksT0FBTztRQUNkbkIsUUFBUW1CLEtBQUssQ0FBQywwQkFBMEJBO1FBQ3hDLE1BQU1BO0lBQ1I7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3dhcnJpb3JzY29tbWVudGFyeWFwaS8uL2xpYi9mcmFtZVByb2Nlc3Nvci5qcz81ZjQ1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBzaGFycCBmcm9tICdzaGFycCc7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwcm9jZXNzRnJhbWUoaW1hZ2VEYXRhLCB3aWR0aCwgaGVpZ2h0KSB7XG4gIHRyeSB7XG4gICAgY29uc29sZS5sb2coXCJQcm9jZXNzaW5nIGZyYW1lOlwiLCB3aWR0aCwgXCJ4XCIsIGhlaWdodCk7XG5cbiAgICBsZXQgYnVmZmVyO1xuICAgIGlmICh0eXBlb2YgaW1hZ2VEYXRhID09PSAnc3RyaW5nJykge1xuICAgICAgLy8gSWYgaW1hZ2VEYXRhIGlzIGEgYmFzZTY0IHN0cmluZywgcmVtb3ZlIHRoZSBwcmVmaXggYW5kIGNvbnZlcnQgdG8gYnVmZmVyXG4gICAgICBjb25zdCBiYXNlNjREYXRhID0gaW1hZ2VEYXRhLnJlcGxhY2UoL15kYXRhOmltYWdlXFwvXFx3KztiYXNlNjQsLywgXCJcIik7XG4gICAgICBidWZmZXIgPSBCdWZmZXIuZnJvbShiYXNlNjREYXRhLCAnYmFzZTY0Jyk7XG4gICAgfSBlbHNlIGlmIChCdWZmZXIuaXNCdWZmZXIoaW1hZ2VEYXRhKSkge1xuICAgICAgLy8gSWYgaW1hZ2VEYXRhIGlzIGFscmVhZHkgYSBCdWZmZXIsIHVzZSBpdCBkaXJlY3RseVxuICAgICAgYnVmZmVyID0gaW1hZ2VEYXRhO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgaW1hZ2VEYXRhIGZvcm1hdCcpO1xuICAgIH1cblxuICAgIC8vIENvbXByZXNzIHRoZSBpbWFnZSB1c2luZyBzaGFycFxuICAgIGNvbnN0IGNvbXByZXNzZWRJbWFnZSA9IGF3YWl0IHNoYXJwKGJ1ZmZlcilcbiAgICAgIC5yZXNpemUoeyB3aWR0aDogNjQwLCBoZWlnaHQ6IDM2MCwgZml0OiAnaW5zaWRlJyB9KVxuICAgICAgLmpwZWcoeyBxdWFsaXR5OiA4MCB9KVxuICAgICAgLnRvQnVmZmVyKCk7XG5cbiAgICBjb25zdCBlbmNvZGVkSW1hZ2UgPSBgZGF0YTppbWFnZS9qcGVnO2Jhc2U2NCwke2NvbXByZXNzZWRJbWFnZS50b1N0cmluZygnYmFzZTY0Jyl9YDtcbiAgICBjb25zb2xlLmxvZyhcIkltYWdlIGNvbXByZXNzZWQsIG5ldyBzaXplOlwiLCBlbmNvZGVkSW1hZ2UubGVuZ3RoKTtcblxuICAgIC8vIEdlbmVyYXRlIGEgc2ltcGxlIGZyYW1lIGRlc2NyaXB0aW9uXG4gICAgY29uc3QgZnJhbWVEZXNjcmlwdGlvbiA9IGBGcmFtZSBzaXplICR7d2lkdGh9eCR7aGVpZ2h0fWA7XG4gICAgY29uc29sZS5sb2coXCJHZW5lcmF0ZWQgZnJhbWUgZGVzY3JpcHRpb246XCIsIGZyYW1lRGVzY3JpcHRpb24pO1xuXG4gICAgcmV0dXJuIHsgZnJhbWVEZXNjcmlwdGlvbiwgZW5jb2RlZEltYWdlIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGluIHByb2Nlc3NGcmFtZTpcIiwgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59XG4iXSwibmFtZXMiOlsic2hhcnAiLCJwcm9jZXNzRnJhbWUiLCJpbWFnZURhdGEiLCJ3aWR0aCIsImhlaWdodCIsImNvbnNvbGUiLCJsb2ciLCJidWZmZXIiLCJiYXNlNjREYXRhIiwicmVwbGFjZSIsIkJ1ZmZlciIsImZyb20iLCJpc0J1ZmZlciIsIkVycm9yIiwiY29tcHJlc3NlZEltYWdlIiwicmVzaXplIiwiZml0IiwianBlZyIsInF1YWxpdHkiLCJ0b0J1ZmZlciIsImVuY29kZWRJbWFnZSIsInRvU3RyaW5nIiwibGVuZ3RoIiwiZnJhbWVEZXNjcmlwdGlvbiIsImVycm9yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/frameProcessor.js\n");

/***/ }),

/***/ "(api)/./lib/groqClient.js":
/*!***************************!*\
  !*** ./lib/groqClient.js ***!
  \***************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   generateCommentaryWithGroq: () => (/* binding */ generateCommentaryWithGroq)\n/* harmony export */ });\n/* harmony import */ var groq_sdk__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! groq-sdk */ \"groq-sdk\");\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! openai */ \"openai\");\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./config */ \"(api)/./lib/config.js\");\n/* harmony import */ var _singleStoreClient__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./singleStoreClient */ \"(api)/./lib/singleStoreClient.js\");\n/* harmony import */ var _singlestore_ai__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @singlestore/ai */ \"@singlestore/ai\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([groq_sdk__WEBPACK_IMPORTED_MODULE_0__, openai__WEBPACK_IMPORTED_MODULE_1__, _singleStoreClient__WEBPACK_IMPORTED_MODULE_3__, _singlestore_ai__WEBPACK_IMPORTED_MODULE_4__]);\n([groq_sdk__WEBPACK_IMPORTED_MODULE_0__, openai__WEBPACK_IMPORTED_MODULE_1__, _singleStoreClient__WEBPACK_IMPORTED_MODULE_3__, _singlestore_ai__WEBPACK_IMPORTED_MODULE_4__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n // Import the database initialization function\n\nconst ai = new _singlestore_ai__WEBPACK_IMPORTED_MODULE_4__.AI({\n    openAIApiKey: process.env.OPENAI_API_KEY\n});\nconst groq = new groq_sdk__WEBPACK_IMPORTED_MODULE_0__[\"default\"]({\n    apiKey: _config__WEBPACK_IMPORTED_MODULE_2__.GROQ_API_KEY\n});\nconst openai = new openai__WEBPACK_IMPORTED_MODULE_1__[\"default\"]({\n    apiKey: process.env.OPENAI_API_KEY\n});\nconst MAX_RETRIES = 3;\nconst RETRY_DELAY = 1000; // 1 second\nasync function generateEmbedding(text) {\n    try {\n        const response = await ai.embeddings.create(text);\n        return response[0];\n    } catch (error) {\n        console.error(\"Error generating embedding:\", error);\n        return null;\n    }\n}\nasync function generateCommentaryWithGroq(encodedImage) {\n    let retries = 0;\n    let commentaryTable;\n    // Initialize commentaryTable only once\n    try {\n        commentaryTable = await (0,_singleStoreClient__WEBPACK_IMPORTED_MODULE_3__.initializeDatabase)(); // Ensure the table is initialized\n    } catch (error) {\n        console.error(\"Error initializing the database:\", error);\n        throw error;\n    }\n    while(retries < MAX_RETRIES){\n        try {\n            console.log(\"Preparing request to Groq API (Attempt \" + (retries + 1) + \")\");\n            console.log(\"Encoded image length:\", encodedImage.length);\n            console.log(\"GROQ_API_KEY set:\", !!_config__WEBPACK_IMPORTED_MODULE_2__.GROQ_API_KEY);\n            const chatCompletion = await groq.chat.completions.create({\n                messages: [\n                    {\n                        role: \"user\",\n                        content: [\n                            {\n                                type: \"text\",\n                                text: \"Describe the scene as if you are an NBA sports commentator commentating on the Warriors vs Cavaliers NBA finals game. ASK viewers ONE QUESTION like 'Will the Warriors make this three-pointer?' or 'Can the defense hold the line?' DO NOT MAKE ANYTHING UP. IF YOU DON'T HAVE INFORMATION, KEEP THE COMMENTARY TO THE CURRENT SCENE. Limit your response to exactly three sentences.\"\n                            },\n                            {\n                                type: \"image_url\",\n                                image_url: {\n                                    url: `${encodedImage}`\n                                }\n                            }\n                        ]\n                    }\n                ],\n                model: \"llava-v1.5-7b-4096-preview\",\n                max_tokens: 150\n            });\n            const commentary = chatCompletion.choices[0]?.message?.content || \"No commentary generated.\";\n            console.log(\"Received response from Groq API:\", commentary);\n            const embedding = await generateEmbedding(commentary);\n            console.log(\"Generated embedding:\", embedding ? \"Embedding generated successfully\" : \"Failed to generate embedding\");\n            // Insert data into SingleStore\n            const timestamp = new Date();\n            if (!commentaryTable) {\n                throw new Error(\"Commentary table is not initialized.\");\n            }\n            await commentaryTable.insert([\n                {\n                    timestamp: timestamp,\n                    commentary: commentary,\n                    embedding: JSON.stringify(embedding),\n                    latency: chatCompletion.usage.completion_time\n                }\n            ]);\n            return {\n                commentary,\n                embedding\n            };\n        } catch (error) {\n            console.error(\"Error generating commentary with Groq (Attempt \" + (retries + 1) + \"):\", error);\n            retries++;\n            if (retries < MAX_RETRIES) {\n                console.log(\"Retrying in \" + RETRY_DELAY + \"ms...\");\n                await new Promise((resolve)=>setTimeout(resolve, RETRY_DELAY));\n            }\n        }\n    }\n    return {\n        commentary: \"Error generating commentary after \" + MAX_RETRIES + \" attempts.\",\n        embedding: null\n    };\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNGO0lBQ0EsT0FBTztRQUNMeUIsWUFDRSx1Q0FBdUMxQixjQUFjO1FBQ3ZENkIsV0FBVztJQUNiO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93YXJyaW9yc2NvbW1lbnRhcnlhcGkvLi9saWIvZ3JvcUNsaWVudC5qcz8wOGI5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBHcm9xIGZyb20gXCJncm9xLXNka1wiO1xuaW1wb3J0IE9wZW5BSSBmcm9tIFwib3BlbmFpXCI7XG5pbXBvcnQgeyBHUk9RX0FQSV9LRVkgfSBmcm9tIFwiLi9jb25maWdcIjtcbmltcG9ydCB7IGluaXRpYWxpemVEYXRhYmFzZSB9IGZyb20gXCIuL3NpbmdsZVN0b3JlQ2xpZW50XCI7IC8vIEltcG9ydCB0aGUgZGF0YWJhc2UgaW5pdGlhbGl6YXRpb24gZnVuY3Rpb25cblxuaW1wb3J0IHsgQUkgfSBmcm9tIFwiQHNpbmdsZXN0b3JlL2FpXCI7XG5jb25zdCBhaSA9IG5ldyBBSSh7IG9wZW5BSUFwaUtleTogcHJvY2Vzcy5lbnYuT1BFTkFJX0FQSV9LRVkgfSk7XG5cbmNvbnN0IGdyb3EgPSBuZXcgR3JvcSh7XG4gIGFwaUtleTogR1JPUV9BUElfS0VZLFxufSk7XG5cbmNvbnN0IG9wZW5haSA9IG5ldyBPcGVuQUkoe1xuICBhcGlLZXk6IHByb2Nlc3MuZW52Lk9QRU5BSV9BUElfS0VZLFxufSk7XG5cbmNvbnN0IE1BWF9SRVRSSUVTID0gMztcbmNvbnN0IFJFVFJZX0RFTEFZID0gMTAwMDsgLy8gMSBzZWNvbmRcblxuYXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGVFbWJlZGRpbmcodGV4dCkge1xuICB0cnkge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYWkuZW1iZWRkaW5ncy5jcmVhdGUodGV4dCk7XG4gICAgcmV0dXJuIHJlc3BvbnNlWzBdO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBnZW5lcmF0aW5nIGVtYmVkZGluZzpcIiwgZXJyb3IpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZW5lcmF0ZUNvbW1lbnRhcnlXaXRoR3JvcShlbmNvZGVkSW1hZ2UpIHtcbiAgbGV0IHJldHJpZXMgPSAwO1xuICBsZXQgY29tbWVudGFyeVRhYmxlO1xuXG4gIC8vIEluaXRpYWxpemUgY29tbWVudGFyeVRhYmxlIG9ubHkgb25jZVxuICB0cnkge1xuICAgIGNvbW1lbnRhcnlUYWJsZSA9IGF3YWl0IGluaXRpYWxpemVEYXRhYmFzZSgpOyAvLyBFbnN1cmUgdGhlIHRhYmxlIGlzIGluaXRpYWxpemVkXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGluaXRpYWxpemluZyB0aGUgZGF0YWJhc2U6XCIsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxuXG4gIHdoaWxlIChyZXRyaWVzIDwgTUFYX1JFVFJJRVMpIHtcbiAgICB0cnkge1xuICAgICAgY29uc29sZS5sb2coXG4gICAgICAgIFwiUHJlcGFyaW5nIHJlcXVlc3QgdG8gR3JvcSBBUEkgKEF0dGVtcHQgXCIgKyAocmV0cmllcyArIDEpICsgXCIpXCIsXG4gICAgICApO1xuICAgICAgY29uc29sZS5sb2coXCJFbmNvZGVkIGltYWdlIGxlbmd0aDpcIiwgZW5jb2RlZEltYWdlLmxlbmd0aCk7XG4gICAgICBjb25zb2xlLmxvZyhcIkdST1FfQVBJX0tFWSBzZXQ6XCIsICEhR1JPUV9BUElfS0VZKTtcblxuICAgICAgY29uc3QgY2hhdENvbXBsZXRpb24gPSBhd2FpdCBncm9xLmNoYXQuY29tcGxldGlvbnMuY3JlYXRlKHtcbiAgICAgICAgbWVzc2FnZXM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICByb2xlOiBcInVzZXJcIixcbiAgICAgICAgICAgIGNvbnRlbnQ6IFtcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHR5cGU6IFwidGV4dFwiLFxuICAgICAgICAgICAgICAgIHRleHQ6IFwiRGVzY3JpYmUgdGhlIHNjZW5lIGFzIGlmIHlvdSBhcmUgYW4gTkJBIHNwb3J0cyBjb21tZW50YXRvciBjb21tZW50YXRpbmcgb24gdGhlIFdhcnJpb3JzIHZzIENhdmFsaWVycyBOQkEgZmluYWxzIGdhbWUuIEFTSyB2aWV3ZXJzIE9ORSBRVUVTVElPTiBsaWtlICdXaWxsIHRoZSBXYXJyaW9ycyBtYWtlIHRoaXMgdGhyZWUtcG9pbnRlcj8nIG9yICdDYW4gdGhlIGRlZmVuc2UgaG9sZCB0aGUgbGluZT8nIERPIE5PVCBNQUtFIEFOWVRISU5HIFVQLiBJRiBZT1UgRE9OJ1QgSEFWRSBJTkZPUk1BVElPTiwgS0VFUCBUSEUgQ09NTUVOVEFSWSBUTyBUSEUgQ1VSUkVOVCBTQ0VORS4gTGltaXQgeW91ciByZXNwb25zZSB0byBleGFjdGx5IHRocmVlIHNlbnRlbmNlcy5cIixcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHR5cGU6IFwiaW1hZ2VfdXJsXCIsXG4gICAgICAgICAgICAgICAgaW1hZ2VfdXJsOiB7XG4gICAgICAgICAgICAgICAgICB1cmw6IGAke2VuY29kZWRJbWFnZX1gLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICAgIG1vZGVsOiBcImxsYXZhLXYxLjUtN2ItNDA5Ni1wcmV2aWV3XCIsXG4gICAgICAgIG1heF90b2tlbnM6IDE1MCxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBjb21tZW50YXJ5ID1cbiAgICAgICAgY2hhdENvbXBsZXRpb24uY2hvaWNlc1swXT8ubWVzc2FnZT8uY29udGVudCB8fFxuICAgICAgICBcIk5vIGNvbW1lbnRhcnkgZ2VuZXJhdGVkLlwiO1xuICAgICAgY29uc29sZS5sb2coXCJSZWNlaXZlZCByZXNwb25zZSBmcm9tIEdyb3EgQVBJOlwiLCBjb21tZW50YXJ5KTtcblxuICAgICAgY29uc3QgZW1iZWRkaW5nID0gYXdhaXQgZ2VuZXJhdGVFbWJlZGRpbmcoY29tbWVudGFyeSk7XG4gICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgXCJHZW5lcmF0ZWQgZW1iZWRkaW5nOlwiLFxuICAgICAgICBlbWJlZGRpbmdcbiAgICAgICAgICA/IFwiRW1iZWRkaW5nIGdlbmVyYXRlZCBzdWNjZXNzZnVsbHlcIlxuICAgICAgICAgIDogXCJGYWlsZWQgdG8gZ2VuZXJhdGUgZW1iZWRkaW5nXCIsXG4gICAgICApO1xuXG4gICAgICAvLyBJbnNlcnQgZGF0YSBpbnRvIFNpbmdsZVN0b3JlXG4gICAgICBjb25zdCB0aW1lc3RhbXAgPSBuZXcgRGF0ZSgpO1xuXG4gICAgICBpZiAoIWNvbW1lbnRhcnlUYWJsZSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb21tZW50YXJ5IHRhYmxlIGlzIG5vdCBpbml0aWFsaXplZC5cIik7XG4gICAgICB9XG5cbiAgICAgIGF3YWl0IGNvbW1lbnRhcnlUYWJsZS5pbnNlcnQoW1xuICAgICAgICB7XG4gICAgICAgICAgdGltZXN0YW1wOiB0aW1lc3RhbXAsXG4gICAgICAgICAgY29tbWVudGFyeTogY29tbWVudGFyeSxcbiAgICAgICAgICBlbWJlZGRpbmc6IEpTT04uc3RyaW5naWZ5KGVtYmVkZGluZyksXG4gICAgICAgICAgbGF0ZW5jeTogY2hhdENvbXBsZXRpb24udXNhZ2UuY29tcGxldGlvbl90aW1lLFxuICAgICAgICB9LFxuICAgICAgXSk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGNvbW1lbnRhcnksXG4gICAgICAgIGVtYmVkZGluZyxcbiAgICAgIH07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgIFwiRXJyb3IgZ2VuZXJhdGluZyBjb21tZW50YXJ5IHdpdGggR3JvcSAoQXR0ZW1wdCBcIiArXG4gICAgICAgICAgKHJldHJpZXMgKyAxKSArXG4gICAgICAgICAgXCIpOlwiLFxuICAgICAgICBlcnJvcixcbiAgICAgICk7XG4gICAgICByZXRyaWVzKys7XG4gICAgICBpZiAocmV0cmllcyA8IE1BWF9SRVRSSUVTKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiUmV0cnlpbmcgaW4gXCIgKyBSRVRSWV9ERUxBWSArIFwibXMuLi5cIik7XG4gICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIFJFVFJZX0RFTEFZKSk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiB7XG4gICAgY29tbWVudGFyeTpcbiAgICAgIFwiRXJyb3IgZ2VuZXJhdGluZyBjb21tZW50YXJ5IGFmdGVyIFwiICsgTUFYX1JFVFJJRVMgKyBcIiBhdHRlbXB0cy5cIixcbiAgICBlbWJlZGRpbmc6IG51bGwsXG4gIH07XG59XG4iXSwibmFtZXMiOlsiR3JvcSIsIk9wZW5BSSIsIkdST1FfQVBJX0tFWSIsImluaXRpYWxpemVEYXRhYmFzZSIsIkFJIiwiYWkiLCJvcGVuQUlBcGlLZXkiLCJwcm9jZXNzIiwiZW52IiwiT1BFTkFJX0FQSV9LRVkiLCJncm9xIiwiYXBpS2V5Iiwib3BlbmFpIiwiTUFYX1JFVFJJRVMiLCJSRVRSWV9ERUxBWSIsImdlbmVyYXRlRW1iZWRkaW5nIiwidGV4dCIsInJlc3BvbnNlIiwiZW1iZWRkaW5ncyIsImNyZWF0ZSIsImVycm9yIiwiY29uc29sZSIsImdlbmVyYXRlQ29tbWVudGFyeVdpdGhHcm9xIiwiZW5jb2RlZEltYWdlIiwicmV0cmllcyIsImNvbW1lbnRhcnlUYWJsZSIsImxvZyIsImxlbmd0aCIsImNoYXRDb21wbGV0aW9uIiwiY2hhdCIsImNvbXBsZXRpb25zIiwibWVzc2FnZXMiLCJyb2xlIiwiY29udGVudCIsInR5cGUiLCJpbWFnZV91cmwiLCJ1cmwiLCJtb2RlbCIsIm1heF90b2tlbnMiLCJjb21tZW50YXJ5IiwiY2hvaWNlcyIsIm1lc3NhZ2UiLCJlbWJlZGRpbmciLCJ0aW1lc3RhbXAiLCJEYXRlIiwiRXJyb3IiLCJpbnNlcnQiLCJKU09OIiwic3RyaW5naWZ5IiwibGF0ZW5jeSIsInVzYWdlIiwiY29tcGxldGlvbl90aW1lIiwiUHJvbWlzZSIsInJlc29sdmUiLCJzZXRUaW1lb3V0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/groqClient.js\n");

/***/ }),

/***/ "(api)/./lib/singleStoreClient.js":
/*!**********************************!*\
  !*** ./lib/singleStoreClient.js ***!
  \**********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   initializeDatabase: () => (/* binding */ initializeDatabase),\n/* harmony export */   query: () => (/* binding */ query)\n/* harmony export */ });\n/* harmony import */ var _singlestore_ai__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @singlestore/ai */ \"@singlestore/ai\");\n/* harmony import */ var _singlestore_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @singlestore/client */ \"@singlestore/client\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_singlestore_ai__WEBPACK_IMPORTED_MODULE_0__, _singlestore_client__WEBPACK_IMPORTED_MODULE_1__]);\n([_singlestore_ai__WEBPACK_IMPORTED_MODULE_0__, _singlestore_client__WEBPACK_IMPORTED_MODULE_1__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\nconst ai = new _singlestore_ai__WEBPACK_IMPORTED_MODULE_0__.AI({\n    openAIApiKey: process.env.OPENAI_API_KEY\n});\nconst client = new _singlestore_client__WEBPACK_IMPORTED_MODULE_1__.SingleStoreClient({\n    ai\n});\n// Function to initialize the database and create the table\nasync function initializeDatabase() {\n    try {\n        // Connect to the workspace\n        const connection = client.workspace({\n            host: process.env.DATABASE_HOST,\n            user: process.env.DATABASE_USERNAME,\n            password: process.env.DATABASE_PASSWORD\n        });\n        // Connect to the database\n        const database = connection.database(process.env.DATABASE_NAME);\n        const commentaryTable = await database.createTable({\n            name: \"commentary_data\",\n            columns: {\n                timestamp: {\n                    type: \"DATETIME\",\n                    nullable: false\n                },\n                commentary: {\n                    type: \"TEXT\",\n                    nullable: false\n                },\n                embedding: {\n                    type: \"vector(1536)\",\n                    nullable: true\n                },\n                latency: {\n                    type: \"FLOAT\",\n                    nullable: true\n                }\n            }\n        });\n        console.log(\"Table created or already exists:\", commentaryTable);\n        return commentaryTable;\n    } catch (error) {\n        console.error(\"Error creating table:\", error);\n        throw error;\n    }\n}\n// Function to perform raw queries on the SingleStore database\nasync function query(sql, values = []) {\n    try {\n        const workspace = client.workspace({\n            host: process.env.DATABASE_HOST,\n            user: process.env.DATABASE_USERNAME,\n            password: process.env.DATABASE_PASSWORD,\n            port: process.env.DATABASE_PORT\n        });\n        const database = workspace.database(process.env.DATABASE_NAME);\n        const [results] = await database.query(sql, values);\n        return results;\n    } catch (error) {\n        console.error(\"Error executing query:\", error);\n        throw error;\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2luZ2xlU3RvcmVDbGllbnQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFxQztBQUNtQjtBQUV4RCxNQUFNRSxLQUFLLElBQUlGLCtDQUFFQSxDQUFDO0lBQUVHLGNBQWNDLFFBQVFDLEdBQUcsQ0FBQ0MsY0FBYztBQUFDO0FBQzdELE1BQU1DLFNBQVMsSUFBSU4sa0VBQWlCQSxDQUFDO0lBQUVDO0FBQUc7QUFFMUMsMkRBQTJEO0FBQ3BELGVBQWVNO0lBQ3BCLElBQUk7UUFDRiwyQkFBMkI7UUFDM0IsTUFBTUMsYUFBYUYsT0FBT0csU0FBUyxDQUFDO1lBQ2xDQyxNQUFNUCxRQUFRQyxHQUFHLENBQUNPLGFBQWE7WUFDL0JDLE1BQU1ULFFBQVFDLEdBQUcsQ0FBQ1MsaUJBQWlCO1lBQ25DQyxVQUFVWCxRQUFRQyxHQUFHLENBQUNXLGlCQUFpQjtRQUN6QztRQUVBLDBCQUEwQjtRQUMxQixNQUFNQyxXQUFXUixXQUFXUSxRQUFRLENBQUNiLFFBQVFDLEdBQUcsQ0FBQ2EsYUFBYTtRQUU5RCxNQUFNQyxrQkFBa0IsTUFBTUYsU0FBU0csV0FBVyxDQUFDO1lBQ2pEQyxNQUFNO1lBQ05DLFNBQVM7Z0JBQ1BDLFdBQVc7b0JBQUVDLE1BQU07b0JBQVlDLFVBQVU7Z0JBQU07Z0JBQy9DQyxZQUFZO29CQUFFRixNQUFNO29CQUFRQyxVQUFVO2dCQUFNO2dCQUM1Q0UsV0FBVztvQkFBRUgsTUFBTTtvQkFBZ0JDLFVBQVU7Z0JBQUs7Z0JBQ2xERyxTQUFTO29CQUFFSixNQUFNO29CQUFTQyxVQUFVO2dCQUFLO1lBQzNDO1FBQ0Y7UUFFQUksUUFBUUMsR0FBRyxDQUFDLG9DQUFvQ1g7UUFDaEQsT0FBT0E7SUFDVCxFQUFFLE9BQU9ZLE9BQU87UUFDZEYsUUFBUUUsS0FBSyxDQUFDLHlCQUF5QkE7UUFDdkMsTUFBTUE7SUFDUjtBQUNGO0FBRUEsOERBQThEO0FBQ3ZELGVBQWVDLE1BQU1DLEdBQUcsRUFBRUMsU0FBUyxFQUFFO0lBQzFDLElBQUk7UUFDRixNQUFNeEIsWUFBWUgsT0FBT0csU0FBUyxDQUFDO1lBQ2pDQyxNQUFNUCxRQUFRQyxHQUFHLENBQUNPLGFBQWE7WUFDL0JDLE1BQU1ULFFBQVFDLEdBQUcsQ0FBQ1MsaUJBQWlCO1lBQ25DQyxVQUFVWCxRQUFRQyxHQUFHLENBQUNXLGlCQUFpQjtZQUN2Q21CLE1BQU0vQixRQUFRQyxHQUFHLENBQUMrQixhQUFhO1FBQ2pDO1FBRUEsTUFBTW5CLFdBQVdQLFVBQVVPLFFBQVEsQ0FBQ2IsUUFBUUMsR0FBRyxDQUFDYSxhQUFhO1FBQzdELE1BQU0sQ0FBQ21CLFFBQVEsR0FBRyxNQUFNcEIsU0FBU2UsS0FBSyxDQUFDQyxLQUFLQztRQUM1QyxPQUFPRztJQUNULEVBQUUsT0FBT04sT0FBTztRQUNkRixRQUFRRSxLQUFLLENBQUMsMEJBQTBCQTtRQUN4QyxNQUFNQTtJQUNSO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93YXJyaW9yc2NvbW1lbnRhcnlhcGkvLi9saWIvc2luZ2xlU3RvcmVDbGllbnQuanM/NjRkNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBSSB9IGZyb20gXCJAc2luZ2xlc3RvcmUvYWlcIjtcbmltcG9ydCB7IFNpbmdsZVN0b3JlQ2xpZW50IH0gZnJvbSBcIkBzaW5nbGVzdG9yZS9jbGllbnRcIjtcblxuY29uc3QgYWkgPSBuZXcgQUkoeyBvcGVuQUlBcGlLZXk6IHByb2Nlc3MuZW52Lk9QRU5BSV9BUElfS0VZIH0pO1xuY29uc3QgY2xpZW50ID0gbmV3IFNpbmdsZVN0b3JlQ2xpZW50KHsgYWkgfSk7XG5cbi8vIEZ1bmN0aW9uIHRvIGluaXRpYWxpemUgdGhlIGRhdGFiYXNlIGFuZCBjcmVhdGUgdGhlIHRhYmxlXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaW5pdGlhbGl6ZURhdGFiYXNlKCkge1xuICB0cnkge1xuICAgIC8vIENvbm5lY3QgdG8gdGhlIHdvcmtzcGFjZVxuICAgIGNvbnN0IGNvbm5lY3Rpb24gPSBjbGllbnQud29ya3NwYWNlKHtcbiAgICAgIGhvc3Q6IHByb2Nlc3MuZW52LkRBVEFCQVNFX0hPU1QsXG4gICAgICB1c2VyOiBwcm9jZXNzLmVudi5EQVRBQkFTRV9VU0VSTkFNRSxcbiAgICAgIHBhc3N3b3JkOiBwcm9jZXNzLmVudi5EQVRBQkFTRV9QQVNTV09SRCxcbiAgICB9KTtcblxuICAgIC8vIENvbm5lY3QgdG8gdGhlIGRhdGFiYXNlXG4gICAgY29uc3QgZGF0YWJhc2UgPSBjb25uZWN0aW9uLmRhdGFiYXNlKHByb2Nlc3MuZW52LkRBVEFCQVNFX05BTUUpO1xuXG4gICAgY29uc3QgY29tbWVudGFyeVRhYmxlID0gYXdhaXQgZGF0YWJhc2UuY3JlYXRlVGFibGUoe1xuICAgICAgbmFtZTogXCJjb21tZW50YXJ5X2RhdGFcIixcbiAgICAgIGNvbHVtbnM6IHtcbiAgICAgICAgdGltZXN0YW1wOiB7IHR5cGU6IFwiREFURVRJTUVcIiwgbnVsbGFibGU6IGZhbHNlIH0sXG4gICAgICAgIGNvbW1lbnRhcnk6IHsgdHlwZTogXCJURVhUXCIsIG51bGxhYmxlOiBmYWxzZSB9LFxuICAgICAgICBlbWJlZGRpbmc6IHsgdHlwZTogXCJ2ZWN0b3IoMTUzNilcIiwgbnVsbGFibGU6IHRydWUgfSxcbiAgICAgICAgbGF0ZW5jeTogeyB0eXBlOiBcIkZMT0FUXCIsIG51bGxhYmxlOiB0cnVlIH0sXG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgY29uc29sZS5sb2coXCJUYWJsZSBjcmVhdGVkIG9yIGFscmVhZHkgZXhpc3RzOlwiLCBjb21tZW50YXJ5VGFibGUpO1xuICAgIHJldHVybiBjb21tZW50YXJ5VGFibGU7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGNyZWF0aW5nIHRhYmxlOlwiLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxuLy8gRnVuY3Rpb24gdG8gcGVyZm9ybSByYXcgcXVlcmllcyBvbiB0aGUgU2luZ2xlU3RvcmUgZGF0YWJhc2VcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBxdWVyeShzcWwsIHZhbHVlcyA9IFtdKSB7XG4gIHRyeSB7XG4gICAgY29uc3Qgd29ya3NwYWNlID0gY2xpZW50LndvcmtzcGFjZSh7XG4gICAgICBob3N0OiBwcm9jZXNzLmVudi5EQVRBQkFTRV9IT1NULFxuICAgICAgdXNlcjogcHJvY2Vzcy5lbnYuREFUQUJBU0VfVVNFUk5BTUUsXG4gICAgICBwYXNzd29yZDogcHJvY2Vzcy5lbnYuREFUQUJBU0VfUEFTU1dPUkQsXG4gICAgICBwb3J0OiBwcm9jZXNzLmVudi5EQVRBQkFTRV9QT1JULFxuICAgIH0pO1xuXG4gICAgY29uc3QgZGF0YWJhc2UgPSB3b3Jrc3BhY2UuZGF0YWJhc2UocHJvY2Vzcy5lbnYuREFUQUJBU0VfTkFNRSk7XG4gICAgY29uc3QgW3Jlc3VsdHNdID0gYXdhaXQgZGF0YWJhc2UucXVlcnkoc3FsLCB2YWx1ZXMpO1xuICAgIHJldHVybiByZXN1bHRzO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBleGVjdXRpbmcgcXVlcnk6XCIsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIkFJIiwiU2luZ2xlU3RvcmVDbGllbnQiLCJhaSIsIm9wZW5BSUFwaUtleSIsInByb2Nlc3MiLCJlbnYiLCJPUEVOQUlfQVBJX0tFWSIsImNsaWVudCIsImluaXRpYWxpemVEYXRhYmFzZSIsImNvbm5lY3Rpb24iLCJ3b3Jrc3BhY2UiLCJob3N0IiwiREFUQUJBU0VfSE9TVCIsInVzZXIiLCJEQVRBQkFTRV9VU0VSTkFNRSIsInBhc3N3b3JkIiwiREFUQUJBU0VfUEFTU1dPUkQiLCJkYXRhYmFzZSIsIkRBVEFCQVNFX05BTUUiLCJjb21tZW50YXJ5VGFibGUiLCJjcmVhdGVUYWJsZSIsIm5hbWUiLCJjb2x1bW5zIiwidGltZXN0YW1wIiwidHlwZSIsIm51bGxhYmxlIiwiY29tbWVudGFyeSIsImVtYmVkZGluZyIsImxhdGVuY3kiLCJjb25zb2xlIiwibG9nIiwiZXJyb3IiLCJxdWVyeSIsInNxbCIsInZhbHVlcyIsInBvcnQiLCJEQVRBQkFTRV9QT1JUIiwicmVzdWx0cyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/singleStoreClient.js\n");

/***/ }),

/***/ "(api)/./pages/api/commentary.js":
/*!*********************************!*\
  !*** ./pages/api/commentary.js ***!
  \*********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _lib_commentaryGenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../lib/commentaryGenerator */ \"(api)/./lib/commentaryGenerator.js\");\n/* harmony import */ var _lib_config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../lib/config */ \"(api)/./lib/config.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_lib_commentaryGenerator__WEBPACK_IMPORTED_MODULE_0__]);\n_lib_commentaryGenerator__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\nasync function handler(req, res) {\n    console.log(\"Commentary API handler called\");\n    console.log(\"GROQ_API_KEY is set:\", !!_lib_config__WEBPACK_IMPORTED_MODULE_1__.GROQ_API_KEY);\n    if (req.method === \"POST\") {\n        try {\n            const { imageData, width, height } = req.body;\n            console.log(\"Received image data:\", width, \"x\", height);\n            if (!imageData) {\n                throw new Error(\"No image data provided\");\n            }\n            console.log(\"Generating commentary...\");\n            const commentary = await (0,_lib_commentaryGenerator__WEBPACK_IMPORTED_MODULE_0__.generateCommentary)(imageData, width, height);\n            console.log(\"Commentary generated:\", commentary);\n            if (commentary.error) {\n                throw new Error(commentary.error);\n            }\n            res.status(200).json(commentary);\n        } catch (error) {\n            console.error(\"Error in generating commentary:\", error);\n            res.status(500).json({\n                text: `Error generating commentary: ${error.message}`,\n                error: true\n            });\n        }\n    } else {\n        res.status(405).json({\n            error: \"Method not allowed\"\n        });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvY29tbWVudGFyeS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBbUU7QUFDbkI7QUFFakMsZUFBZUUsUUFBUUMsR0FBRyxFQUFFQyxHQUFHO0lBQzVDQyxRQUFRQyxHQUFHLENBQUM7SUFDWkQsUUFBUUMsR0FBRyxDQUFDLHdCQUF3QixDQUFDLENBQUNMLHFEQUFZQTtJQUVsRCxJQUFJRSxJQUFJSSxNQUFNLEtBQUssUUFBUTtRQUN6QixJQUFJO1lBQ0YsTUFBTSxFQUFFQyxTQUFTLEVBQUVDLEtBQUssRUFBRUMsTUFBTSxFQUFFLEdBQUdQLElBQUlRLElBQUk7WUFDN0NOLFFBQVFDLEdBQUcsQ0FBQyx3QkFBd0JHLE9BQU8sS0FBS0M7WUFFaEQsSUFBSSxDQUFDRixXQUFXO2dCQUNkLE1BQU0sSUFBSUksTUFBTTtZQUNsQjtZQUVBUCxRQUFRQyxHQUFHLENBQUM7WUFDWixNQUFNTyxhQUFhLE1BQU1iLDRFQUFrQkEsQ0FBQ1EsV0FBV0MsT0FBT0M7WUFDOURMLFFBQVFDLEdBQUcsQ0FBQyx5QkFBeUJPO1lBRXJDLElBQUlBLFdBQVdDLEtBQUssRUFBRTtnQkFDcEIsTUFBTSxJQUFJRixNQUFNQyxXQUFXQyxLQUFLO1lBQ2xDO1lBRUFWLElBQUlXLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUNIO1FBQ3ZCLEVBQUUsT0FBT0MsT0FBTztZQUNkVCxRQUFRUyxLQUFLLENBQUMsbUNBQW1DQTtZQUNqRFYsSUFBSVcsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztnQkFDbkJDLE1BQU0sQ0FBQyw2QkFBNkIsRUFBRUgsTUFBTUksT0FBTyxDQUFDLENBQUM7Z0JBQ3JESixPQUFPO1lBQ1Q7UUFDRjtJQUNGLE9BQU87UUFDTFYsSUFBSVcsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUFFRixPQUFPO1FBQXFCO0lBQ3JEO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93YXJyaW9yc2NvbW1lbnRhcnlhcGkvLi9wYWdlcy9hcGkvY29tbWVudGFyeS5qcz83YzI0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdlbmVyYXRlQ29tbWVudGFyeSB9IGZyb20gXCIuLi8uLi9saWIvY29tbWVudGFyeUdlbmVyYXRvclwiO1xuaW1wb3J0IHsgR1JPUV9BUElfS0VZIH0gZnJvbSBcIi4uLy4uL2xpYi9jb25maWdcIjtcblxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXEsIHJlcykge1xuICBjb25zb2xlLmxvZyhcIkNvbW1lbnRhcnkgQVBJIGhhbmRsZXIgY2FsbGVkXCIpO1xuICBjb25zb2xlLmxvZyhcIkdST1FfQVBJX0tFWSBpcyBzZXQ6XCIsICEhR1JPUV9BUElfS0VZKTtcblxuICBpZiAocmVxLm1ldGhvZCA9PT0gXCJQT1NUXCIpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBpbWFnZURhdGEsIHdpZHRoLCBoZWlnaHQgfSA9IHJlcS5ib2R5O1xuICAgICAgY29uc29sZS5sb2coXCJSZWNlaXZlZCBpbWFnZSBkYXRhOlwiLCB3aWR0aCwgXCJ4XCIsIGhlaWdodCk7XG5cbiAgICAgIGlmICghaW1hZ2VEYXRhKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIGltYWdlIGRhdGEgcHJvdmlkZWRcIik7XG4gICAgICB9XG5cbiAgICAgIGNvbnNvbGUubG9nKFwiR2VuZXJhdGluZyBjb21tZW50YXJ5Li4uXCIpO1xuICAgICAgY29uc3QgY29tbWVudGFyeSA9IGF3YWl0IGdlbmVyYXRlQ29tbWVudGFyeShpbWFnZURhdGEsIHdpZHRoLCBoZWlnaHQpO1xuICAgICAgY29uc29sZS5sb2coXCJDb21tZW50YXJ5IGdlbmVyYXRlZDpcIiwgY29tbWVudGFyeSk7XG5cbiAgICAgIGlmIChjb21tZW50YXJ5LmVycm9yKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihjb21tZW50YXJ5LmVycm9yKTtcbiAgICAgIH1cblxuICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oY29tbWVudGFyeSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBpbiBnZW5lcmF0aW5nIGNvbW1lbnRhcnk6XCIsIGVycm9yKTtcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgICAgdGV4dDogYEVycm9yIGdlbmVyYXRpbmcgY29tbWVudGFyeTogJHtlcnJvci5tZXNzYWdlfWAsXG4gICAgICAgIGVycm9yOiB0cnVlLFxuICAgICAgfSk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHJlcy5zdGF0dXMoNDA1KS5qc29uKHsgZXJyb3I6IFwiTWV0aG9kIG5vdCBhbGxvd2VkXCIgfSk7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJnZW5lcmF0ZUNvbW1lbnRhcnkiLCJHUk9RX0FQSV9LRVkiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwiY29uc29sZSIsImxvZyIsIm1ldGhvZCIsImltYWdlRGF0YSIsIndpZHRoIiwiaGVpZ2h0IiwiYm9keSIsIkVycm9yIiwiY29tbWVudGFyeSIsImVycm9yIiwic3RhdHVzIiwianNvbiIsInRleHQiLCJtZXNzYWdlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./pages/api/commentary.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fcommentary&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fcommentary.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();